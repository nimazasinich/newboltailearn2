# Production Environment Configuration
# This file contains production-ready settings with secure defaults

# ============================================
# Core Production Settings
# ============================================
NODE_ENV=production
APP_NAME=persian-legal-ai
APP_VERSION=1.0.0

# ============================================
# Server Configuration
# ============================================
PORT=3000
BACKEND_PORT=3000
FRONTEND_PORT=80
NGINX_PORT=80

# ============================================
# Database Configuration
# ============================================
DATABASE_PATH=/data/database.sqlite
SQLITE_PATH=/data/database.sqlite
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_ACQUIRE_TIMEOUT=60000

# ============================================
# Security - MUST OVERRIDE THESE!
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET=${JWT_SECRET}
SESSION_SECRET=${SESSION_SECRET}

# Token expiration
JWT_EXPIRES_IN=1d
JWT_REFRESH_EXPIRES_IN=7d

# Password security
BCRYPT_ROUNDS=12

# ============================================
# CORS Production Settings
# ============================================
# Set to your actual domain
CORS_ORIGIN=${CORS_ORIGIN:-https://your-domain.com}
CORS_CREDENTIALS=true

# ============================================
# Frontend Production URLs
# ============================================
VITE_API_URL=/api
VITE_WS_URL=/
VITE_BASE_PATH=/

# ============================================
# Redis Cache (Production)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0

# Cache TTL (production values)
CACHE_TTL_DEFAULT=7200
CACHE_TTL_SESSION=86400
CACHE_TTL_STATIC=2592000

# ============================================
# TensorFlow.js Production
# ============================================
TF_MODEL_PATH=/app/models
TF_BACKEND=cpu
TF_FORCE_GPU_ALLOW_GROWTH=true

# ============================================
# Production Logging
# ============================================
LOG_LEVEL=warn
LOG_FILE=/logs/app.log
LOG_MAX_SIZE=50M
LOG_MAX_FILES=30

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# ============================================
# Rate Limiting (Production)
# ============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=60

AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=3

# ============================================
# File Upload (Production)
# ============================================
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=pdf,doc,docx,txt
UPLOAD_DIR=/app/uploads

# ============================================
# Email Configuration (Production)
# ============================================
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_SECURE=${SMTP_SECURE:-true}
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
EMAIL_FROM=${EMAIL_FROM:-noreply@your-domain.com}

# ============================================
# Performance (Production)
# ============================================
NODE_OPTIONS=--max-old-space-size=4096
WORKER_THREADS=8
CLUSTER_ENABLED=true
CLUSTER_WORKERS=auto

# ============================================
# Docker Production Settings
# ============================================
RESTART_POLICY=always
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# ============================================
# Health Check Configuration
# ============================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups

# ============================================
# SSL/TLS Configuration
# ============================================
SSL_ENABLED=${SSL_ENABLED:-false}
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# ============================================
# CDN Configuration (Optional)
# ============================================
CDN_ENABLED=${CDN_ENABLED:-false}
CDN_URL=${CDN_URL}

# ============================================
# Analytics (Optional)
# ============================================
ANALYTICS_ENABLED=${ANALYTICS_ENABLED:-false}
ANALYTICS_ID=${ANALYTICS_ID}

# ============================================
# Feature Flags
# ============================================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_SOCIAL_AUTH_ENABLED=false
FEATURE_2FA_ENABLED=true
FEATURE_API_DOCS_ENABLED=false