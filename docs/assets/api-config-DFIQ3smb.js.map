{"version":3,"file":"api-config-DFIQ3smb.js","sources":["../../src/lib/api-config.ts"],"sourcesContent":["// Real API base configuration\r\nconst RAW_BASE = import.meta.env?.VITE_API_BASE ?? '/api';\r\n\r\n// RequestInit type for fetch\r\ntype RequestInit = globalThis.RequestInit;\r\n\r\nfunction normalizeApiBase(base: string): string {\r\n  const trimmed = (base || '').trim();\r\n  const withoutTrailingSlash = trimmed.endsWith('/') ? trimmed.slice(0, -1) : trimmed;\r\n  return withoutTrailingSlash.startsWith('/') ? withoutTrailingSlash : `/${withoutTrailingSlash}`;\r\n}\r\n\r\nexport const API_BASE = normalizeApiBase(RAW_BASE);\r\n\r\n// Safe URL joining\r\nexport function joinApiPath(basePath: string, endpoint: string): string {\r\n  const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n  return `${basePath}${cleanEndpoint}`;\r\n}\r\n\r\n// Request wrapper with proper error handling\r\nexport async function apiRequest(endpoint: string, options?: RequestInit): Promise<Response> {\r\n  const url = endpoint.startsWith('/api') || endpoint.startsWith('http') \r\n    ? endpoint \r\n    : joinApiPath(API_BASE, endpoint);\r\n  \r\n  const response = await fetch(url, {\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options?.headers,\r\n    },\r\n    ...options,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`API Error: ${response.status} ${response.statusText} - ${url}`);\r\n  }\r\n\r\n  return response;\r\n}\r\n\r\n// Typed API responses\r\nexport interface ApiResponse<T> {\r\n  data?: T;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\n// Helper for handling API responses\r\nexport async function handleApiResponse<T>(response: Response): Promise<T> {\r\n  const data = await response.json();\r\n  if (data.error) {\r\n    throw new Error(data.error);\r\n  }\r\n  return data.data || data;\r\n}\r\n\r\n// API endpoints configuration\r\nexport const API_ENDPOINTS = {\r\n  // Models\r\n  MODELS: '/models',\r\n  MODEL_BY_ID: (id: string) => `/models/${id}`,\r\n  MODEL_TRAIN: (id: string) => `/models/${id}/train`,\r\n  MODEL_PAUSE: (id: string) => `/models/${id}/pause`,\r\n  MODEL_RESUME: (id: string) => `/models/${id}/resume`,\r\n  MODEL_DELETE: (id: string) => `/models/${id}`,\r\n  MODEL_EXPORT: (id: string) => `/models/${id}/export`,\r\n  MODEL_CHECKPOINTS: (id: string) => `/models/${id}/checkpoints`,\r\n  \r\n  // Analytics\r\n  ANALYTICS: '/analytics',\r\n  ANALYTICS_ADVANCED: '/analytics/advanced',\r\n  ANALYTICS_PERFORMANCE: '/analytics/performance',\r\n  ANALYTICS_USAGE: '/analytics/usage',\r\n  \r\n  // Datasets\r\n  DATASETS: '/datasets',\r\n  DATASET_BY_ID: (id: string) => `/datasets/${id}`,\r\n  DATASET_DOWNLOAD: (id: string) => `/datasets/${id}/download`,\r\n  \r\n  // Monitoring\r\n  MONITORING: '/monitoring',\r\n  MONITORING_LOGS: '/monitoring/logs',\r\n  MONITORING_HEALTH: '/monitoring/health',\r\n  MONITORING_PERFORMANCE: '/monitoring/performance',\r\n  \r\n  // Logs\r\n  LOGS: '/logs',\r\n  \r\n  // Settings\r\n  SETTINGS: '/settings',\r\n  \r\n  // Team\r\n  TEAM: '/team',\r\n  \r\n  // Health\r\n  HEALTH: '/health',\r\n  \r\n  // System metrics\r\n  SYSTEM_METRICS: '/system/metrics',\r\n} as const;\r\n"],"names":["API_BASE","base","trimmed","trim","withoutTrailingSlash","endsWith","slice","startsWith","normalizeApiBase","__vite_import_meta_env__","VITE_API_BASE","joinApiPath","basePath","endpoint","async","apiRequest","options","url","response","fetch","credentials","headers","Content-Type","ok","Error","status","statusText","API_ENDPOINTS","MODELS","MODEL_BY_ID","id","MODEL_TRAIN","MODEL_PAUSE","MODEL_RESUME","MODEL_DELETE","MODEL_EXPORT","MODEL_CHECKPOINTS","ANALYTICS","ANALYTICS_ADVANCED","ANALYTICS_PERFORMANCE","ANALYTICS_USAGE","DATASETS","DATASET_BY_ID","DATASET_DOWNLOAD","MONITORING","MONITORING_LOGS","MONITORING_HEALTH","MONITORING_PERFORMANCE","LOGS","SETTINGS","TEAM","HEALTH","SYSTEM_METRICS"],"mappings":"WAYO,MAAMA,EANb,SAA0BC,GACxB,MAAMC,GAAWD,GAAQ,IAAIE,OACvBC,EAAuBF,EAAQG,SAAS,KAAOH,EAAQI,MAAM,GAAG,GAAMJ,EAC5E,OAAOE,EAAqBG,WAAW,KAAOH,EAAuB,IAAIA,EAGnDI,QAXPC,WAAiBC,gBAAiB,QAc5C,SAASC,EAAYC,EAAkBC,GAE5C,MAAO,GAAGD,IADYC,EAASN,WAAW,KAAOM,EAAW,IAAIA,IAKlEC,eAAsBC,EAAWF,EAAkBG,GACjD,MAAMC,EAAMJ,EAASN,WAAW,SAAWM,EAASN,WAAW,QAC3DM,EACAF,EAAYX,EAAUa,GAEpBK,QAAiBC,MAAMF,EAAK,CAChCG,YAAa,UACbC,QAAS,CACPC,eAAgB,sBACb,MAAAN,OAAA,EAAAA,EAASK,YAEXL,IAGL,IAAKE,EAASK,GACZ,MAAM,IAAIC,MAAM,cAAcN,EAASO,UAAUP,EAASQ,gBAAgBT,KAG5E,OAAOC,EAoBF,MAAMS,EAAgB,CAE3BC,OAAQ,UACRC,YAAcC,GAAe,WAAWA,EACxCC,YAAcD,GAAe,WAAWA,UACxCE,YAAcF,GAAe,WAAWA,UACxCG,aAAeH,GAAe,WAAWA,WACzCI,aAAeJ,GAAe,WAAWA,EACzCK,aAAeL,GAAe,WAAWA,WACzCM,kBAAoBN,GAAe,WAAWA,gBAG9CO,UAAW,aACXC,mBAAoB,sBACpBC,sBAAuB,yBACvBC,gBAAiB,mBAGjBC,SAAU,YACVC,cAAgBZ,GAAe,aAAaA,EAC5Ca,iBAAmBb,GAAe,aAAaA,aAG/Cc,WAAY,cACZC,gBAAiB,mBACjBC,kBAAmB,qBACnBC,uBAAwB,0BAGxBC,KAAM,QAGNC,SAAU,YAGVC,KAAM,QAGNC,OAAQ,UAGRC,eAAgB"}