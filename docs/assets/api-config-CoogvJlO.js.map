{"version":3,"file":"api-config-CoogvJlO.js","sources":["../../src/lib/api-config.ts"],"sourcesContent":["// Real API base configuration\r\nconst RAW_BASE = import.meta.env?.VITE_API_BASE ?? '/api';\r\n\r\n// RequestInit type for fetch\r\ntype RequestInit = globalThis.RequestInit;\r\n\r\nfunction normalizeApiBase(base: string): string {\r\n  const trimmed = (base || '').trim();\r\n  const withoutTrailingSlash = trimmed.endsWith('/') ? trimmed.slice(0, -1) : trimmed;\r\n  return withoutTrailingSlash.startsWith('/') ? withoutTrailingSlash : `/${withoutTrailingSlash}`;\r\n}\r\n\r\nexport const API_BASE = normalizeApiBase(RAW_BASE);\r\n\r\n// Safe URL joining\r\nexport function joinApiPath(basePath: string, endpoint: string): string {\r\n  const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n  return `${basePath}${cleanEndpoint}`;\r\n}\r\n\r\n// Request wrapper with proper error handling\r\nexport async function apiRequest(endpoint: string, options?: RequestInit): Promise<Response> {\r\n  const url = endpoint.startsWith('/api') || endpoint.startsWith('http') \r\n    ? endpoint \r\n    : joinApiPath(API_BASE, endpoint);\r\n  \r\n  const response = await fetch(url, {\r\n    credentials: 'include',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...options?.headers,\r\n    },\r\n    ...options,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    throw new Error(`API Error: ${response.status} ${response.statusText} - ${url}`);\r\n  }\r\n\r\n  return response;\r\n}\r\n\r\n// Typed API responses\r\nexport interface ApiResponse<T> {\r\n  data?: T;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\n// Helper for handling API responses\r\nexport async function handleApiResponse<T>(response: Response): Promise<T> {\r\n  const data = await response.json();\r\n  if (data.error) {\r\n    throw new Error(data.error);\r\n  }\r\n  return data.data || data;\r\n}\r\n\r\n// API endpoints configuration\r\nexport const API_ENDPOINTS = {\r\n  // Models\r\n  MODELS: '/models',\r\n  MODEL_BY_ID: (id: string) => `/models/${id}`,\r\n  MODEL_TRAIN: (id: string) => `/models/${id}/train`,\r\n  MODEL_PAUSE: (id: string) => `/models/${id}/pause`,\r\n  MODEL_RESUME: (id: string) => `/models/${id}/resume`,\r\n  MODEL_DELETE: (id: string) => `/models/${id}`,\r\n  MODEL_EXPORT: (id: string) => `/models/${id}/export`,\r\n  MODEL_CHECKPOINTS: (id: string) => `/models/${id}/checkpoints`,\r\n  \r\n  // Analytics\r\n  ANALYTICS: '/analytics',\r\n  ANALYTICS_ADVANCED: '/analytics/advanced',\r\n  ANALYTICS_PERFORMANCE: '/analytics/performance',\r\n  ANALYTICS_USAGE: '/analytics/usage',\r\n  \r\n  // Datasets\r\n  DATASETS: '/datasets',\r\n  DATASET_BY_ID: (id: string) => `/datasets/${id}`,\r\n  DATASET_DOWNLOAD: (id: string) => `/datasets/${id}/download`,\r\n  \r\n  // Monitoring\r\n  MONITORING: '/monitoring',\r\n  MONITORING_LOGS: '/monitoring/logs',\r\n  MONITORING_HEALTH: '/monitoring/health',\r\n  MONITORING_PERFORMANCE: '/monitoring/performance',\r\n  \r\n  // Logs\r\n  LOGS: '/logs',\r\n  \r\n  // Settings\r\n  SETTINGS: '/settings',\r\n  \r\n  // Team\r\n  TEAM: '/team',\r\n  \r\n  // Health\r\n  HEALTH: '/health',\r\n  \r\n  // System metrics\r\n  SYSTEM_METRICS: '/system/metrics',\r\n} as const;\r\n"],"names":["RAW_BASE","__vite_import_meta_env__","normalizeApiBase","base","trimmed","withoutTrailingSlash","API_BASE","joinApiPath","basePath","endpoint","cleanEndpoint","apiRequest","options","url","response","API_ENDPOINTS","id"],"mappings":"WACMA,GAAWC,GAAA,YAAAA,EAAiB,gBAAiB,OAKnD,SAASC,EAAiBC,EAAsB,CAC9C,MAAMC,GAAWD,GAAQ,IAAI,KAAA,EACvBE,EAAuBD,EAAQ,SAAS,GAAG,EAAIA,EAAQ,MAAM,EAAG,EAAE,EAAIA,EAC5E,OAAOC,EAAqB,WAAW,GAAG,EAAIA,EAAuB,IAAIA,CAAoB,EAC/F,CAEO,MAAMC,EAAWJ,EAAiBF,CAAQ,EAG1C,SAASO,EAAYC,EAAkBC,EAA0B,CACtE,MAAMC,EAAgBD,EAAS,WAAW,GAAG,EAAIA,EAAW,IAAIA,CAAQ,GACxE,MAAO,GAAGD,CAAQ,GAAGE,CAAa,EACpC,CAGA,eAAsBC,EAAWF,EAAkBG,EAA0C,CAC3F,MAAMC,EAAMJ,EAAS,WAAW,MAAM,GAAKA,EAAS,WAAW,MAAM,EACjEA,EACAF,EAAYD,EAAUG,CAAQ,EAE5BK,EAAW,MAAM,MAAMD,EAAK,CAChC,YAAa,UACb,QAAS,CACP,eAAgB,mBAChB,GAAGD,GAAA,YAAAA,EAAS,OAAA,EAEd,GAAGA,CAAA,CACJ,EAED,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,cAAcA,EAAS,MAAM,IAAIA,EAAS,UAAU,MAAMD,CAAG,EAAE,EAGjF,OAAOC,CACT,CAmBO,MAAMC,EAAgB,CAE3B,OAAQ,UACR,YAAcC,GAAe,WAAWA,CAAE,GAC1C,YAAcA,GAAe,WAAWA,CAAE,SAC1C,YAAcA,GAAe,WAAWA,CAAE,SAC1C,aAAeA,GAAe,WAAWA,CAAE,UAC3C,aAAeA,GAAe,WAAWA,CAAE,GAC3C,aAAeA,GAAe,WAAWA,CAAE,UAC3C,kBAAoBA,GAAe,WAAWA,CAAE,eAGhD,UAAW,aACX,mBAAoB,sBACpB,sBAAuB,yBACvB,gBAAiB,mBAGjB,SAAU,YACV,cAAgBA,GAAe,aAAaA,CAAE,GAC9C,iBAAmBA,GAAe,aAAaA,CAAE,YAGjD,WAAY,cACZ,gBAAiB,mBACjB,kBAAmB,qBACnB,uBAAwB,0BAGxB,KAAM,QAGN,SAAU,YAGV,KAAM,QAGN,OAAQ,UAGR,eAAgB,iBAClB"}